<h1><%= @pet.name.capitalize %>'s Nutrition Plan</h1>


<hr>

<style>
  .meal-card {
    width: 600px;
    margin: 10px auto;
    padding: 20px;
  }

  .meal-card-body {
    display: flex;
    justify-content: space-between;
  }

  .btn {
    width: 220px;
    display: flex;
    justify-content: center;
    border: solid 1px rgba(0, 0, 0, 0.2);
    border-radius: 20px;
  }

   .btn:hover {
    width: 220px;
    display: flex;
    justify-content: center;
    border: solid 1px rgba(0, 0, 0, 0.2);
    border-radius: 20px;
  }

   .checkbox {
    height: 20px;
  }

  .checkbox:focus {
    border: none;
  }

  .checkbox:checked {

    background-color: green;
  }

</style>


<div id="mealCardCarousel" class="carousel slide" data-ride="carousel" data-interval="false">
  <div class="carousel-inner">
    <% @nutrition_data.each_slice(3) do |meals_slice| %>
      <div class="carousel-item <%= 'active' if meals_slice.first.date == Date.today %>">
        <div class="d-flex flex-column align-items-center">
          <% meals_slice.each do |meal| %>
            <div class="card meal-card mx-2">
              <div class="meal-card-body">
                <div>
                  <p><%= meal.date.strftime("%A, %B %e, %Y") %></p>
                  <p><strong><%= meal.meal_type.capitalize %></strong></p>
                  <p>Meal: <%= meal.food_items %></p>
                  <p>Calories: <%= meal.calories %></p>
                  <p>Notes: <%= meal.notes %></p>
                </div>
                <%= button_to mark_meal_as_completed_path(pet_id: @pet.id, nutrition_id: meal.id), class: "btn" do %>
                  <div class="form-check form-switch">
                    <input class="form-check-input checkbox" type="checkbox" role="switch" id="flexSwitchCheck<%= meal.id %>" <%= meal.completed? ? "checked" : "" %> >
                    <label class="form-check-label" for="flexSwitchCheck<%= meal.id %>">Mark as Completed</label>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>
  <a class="carousel-control-prev" href="#mealCardCarousel" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#mealCardCarousel" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<!-- Bootstrap JS and dependencies -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<hr>



<% @nutrition_data.each do |meal| %>
  <div class="meal-card">
    <p><%= meal.date.strftime("%A, %B %e, %Y") %></p>
    <p><%= meal.meal_type.capitalize %></p>
    <p>Meal: <%= meal.food_items %></p>
    <p>Calories: <%= meal.calories %></p>
    <p>Notes: <%= meal.notes %></p>
    <%= button_to mark_meal_as_completed_path(pet_id: @pet.id, nutrition_id: meal.id), class: "" do %>
            <div class="form-check form-switch">
              <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" <%= meal.completed? ? "checked" : "" %> >
              <label class="form-check-label" for="flexSwitchCheckDefault">Mark as Completed</label>
            </div>
    <% end %>
  </div>
<% end %>
 <%= console %>
