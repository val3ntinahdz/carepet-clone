<h1 class="mb-5"><%= @pet.name.capitalize %>'s Nutrition Plan</h1>

<style>

  .meal-card-0,
  .meal-card-1,
  .meal-card-2 {
    width: 600px;
    margin: 10px auto;
    padding: 30px;
    border: none;
    border-radius: 20px;
  }

   .meal-card-0 {
    background-color: #FFF5EC;
   }

   .meal-card-1 {
    background-color: #C5DDDA;
   }

   .meal-card-2 {
    background-color: rgba(0, 0, 255, 0.1);
   }

   .details-card {
    padding: 20px;
    background-color: rgba(0, 0, 0, 0.07);
    border-radius: 20px;
    align-items: center;
   }

  .food-items {
    width: 38%;
   }


   .notes {
    width: 38%;
    margin: 0 10px;
   }

  .calories {
    width: 24%;
  }

  i {
  font-size: 1em;
  padding: 10px;
  margin-bottom: 10px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 50%;
}

  .btn-switch {
    display: flex;
    margin-top: -5px;
    justify-content: center;
    background-color: rgba(0, 0, 0, 0.07);
    border-radius: 20px;
  }

 .form-check input, .form-check label {
    cursor: pointer;
  }

   .btn-switch:hover {
    display: flex;
    justify-content: center;
    border: solid 1px rgba(0, 0, 0, 0.2);
  }

   .checkbox {
    height: 20px;
  }

  .checkbox:checked {
    background-color: green;
  }

 .form-switch .form-check-input:focus {
    border: none;
    box-shadow: 0 0 0 0.2rem rgba(0, 0, 0, 0.07);;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='rgba%280, 0, 0, 0.25%29'/%3e%3c/svg%3e");
}

@media (max-width: 576px) {

 .details-cards {
    flex-direction: column;
  }

  .details-card {
    width: 100%;
    margin: 10px 0;
  }

  .meal-card-0,
  .meal-card-1,
  .meal-card-2 {
    width: 105%;
  }
}


</style>


<hr>

<div data-controller="nutrition">
	<div class="swiper-container nutrition">
		<div class="swiper-wrapper">
    <% breakfast = @nutrition_data.where(date: Date.today).first %>
      <% today_index = @nutrition_data.index(breakfast) %>
		    <% @nutrition_data.rotate(today_index).each_slice(3) do |meals_slice| %>
      <div class="swiper-slide<%= ' active' if meals_slice.first.date == Date.today %>">
        <div class="d-flex flex-column align-items-center">
          <p><strong><%= meals_slice.first.date.strftime("%A, %B %e, %Y") %></strong></p>
            <% meals_slice.each_with_index do |meal, index| %>
              <div class="card meal-card-<%= index %> mx-2">
                <div class="meal-card-body">
                <div class="d-flex justify-content-between mb-3">
                    <p style="font-size: 22px"><strong><%= meal.meal_type.capitalize %></strong></p>
                    <%= button_to mark_meal_as_completed_path(pet_id: @pet.id, nutrition_id: meal.id), class: "btn btn-switch" do %>
                    <div class="form-check form-switch">
                      <input class="form-check-input checkbox" type="checkbox" role="switch" id="flexSwitchCheck<%= meal.id %>" <%= meal.completed? ? "checked" : "" %> >
                      <label class="form-check-label" for="flexSwitchCheck<%= meal.id %>">Done</label>
                    </div>
                  <% end %>
                </div>
                  <div class="details-cards d-flex">
                    <div class="details-card food-items"><i class="fa-solid fa-utensils"></i><p><%= meal.food_items.capitalize %></p></div>
                    <div class="details-card notes"><i class="fa-regular fa-comment-dots"></i><p><%= meal.notes.capitalize %></p></div>
                    <div class="details-card calories"><i class="fa-solid fa-fire-flame-simple"></i><p><%= meal.calories %> calories</p></div>
                  </div>

                </div>
              </div>
            <% end %>
        </div>
      </div>
    <% end %>
		</div>
		<div class="swiper-pagination"></div>
	</div>
</div>
  <%= console %>
